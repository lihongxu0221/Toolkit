<UserControl x:Class="BgCommon.Prism.Wpf.Authority.Views.UserLoginView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:prism="http://prismlibrary.com/"
             xmlns:hc="https://handyorg.github.io/handycontrol"
             xmlns:bg="http://www.sz-baigu.com/"
             xmlns:local="clr-namespace:BgCommon.Prism.Wpf.Authority"
             xmlns:view="clr-namespace:BgCommon.Prism.Wpf.Authority.Views"
             xmlns:vm="clr-namespace:BgCommon.Prism.Wpf.Authority.ViewModels"
             xmlns:sys="clr-namespace:System;assembly=mscorlib"
             mc:Ignorable="d" d:DesignHeight="680" d:DesignWidth="1024"        
             d:DataContext="{d:DesignInstance vm:UserLoginViewModel}"
             prism:ViewModelLocator.AutoWireViewModel="True"
             Width="1024" Height="680"
             FontSize="{DynamicResource SubHeadFontSize}"
             Foreground="{DynamicResource PrimaryTextBrush}"
             Background="Transparent">
    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="pack://application:,,,/BgCommon.Prism.Wpf;component/Assets/Style/Theme.xaml" />
            </ResourceDictionary.MergedDictionaries>
            <!-- 星星图标的路径数据 -->
            <Geometry x:Key="StarIcon">M9.9,1.1L6.9,6.7L0.8,7.3l4.5,4.1L4.2,17.4l5.6-3.1l5.6,3.1L14.3,11.4l4.5-4.1l-6.1-0.6L9.9,1.1z</Geometry>

            <sys:Double x:Key="PanelWidth">480</sys:Double>
            <sys:Double x:Key="PanelHeight">520</sys:Double>
            <CornerRadius x:Key="PanelCornerRadius">15</CornerRadius>

            <RadialGradientBrush x:Key="GlassBackground">
                <GradientStop Color="#60FFFFFF" Offset="0"/>
                <GradientStop Color="#30FFFFFF" Offset="0.7"/>
                <GradientStop Color="#10FFFFFF" Offset="1"/>
            </RadialGradientBrush>

            <LinearGradientBrush x:Key="GlassBorder">
                <GradientStop Color="#80F8F8FF" Offset="0"/>
                <GradientStop Color="#40F8F8FF" Offset="0.5"/>
                <GradientStop Color="#20F8F8FF" Offset="1"/>
            </LinearGradientBrush>

            <LinearGradientBrush x:Key="GlassButtonBackground">
                <GradientStop Color="#60007AFF" Offset="0"/>
                <GradientStop Color="#40007AFF" Offset="0.5"/>
                <GradientStop Color="#30007AFF" Offset="1"/>
            </LinearGradientBrush>

            <Style x:Key="LoginButtonStyle" TargetType="Button">
                <Setter Property="Height" Value="45"/>
                <Setter Property="Foreground" Value="White"/>
                <Setter Property="FontSize" Value="16"/>
                <Setter Property="FontWeight" Value="Bold"/>
                <Setter Property="Cursor" Value="Hand"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="Button">
                            <Border x:Name="border" CornerRadius="8">
                                <Border.Background>
                                    <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                                        <GradientStop Color="{DynamicResource PrimaryColor}" Offset="0.0"/>
                                        <GradientStop Color="{DynamicResource PrimaryColor}" Offset="1.0"/>
                                    </LinearGradientBrush>
                                </Border.Background>
                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter TargetName="border" Property="Opacity" Value="0.9"/>
                                </Trigger>
                                <Trigger Property="IsPressed" Value="True">
                                    <Setter TargetName="border" Property="Opacity" Value="0.7"/>
                                </Trigger>
                                <Trigger Property="IsEnabled" Value="False">
                                    <Setter Property="Opacity" Value="0.5"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>

            <Style x:Key="GlassTitle" TargetType="TextBlock">
                <Setter Property="Foreground" Value="White"/>
                <Setter Property="FontSize" Value="36"/>
                <Setter Property="FontWeight" Value="Light"/>
                <Setter Property="FontFamily" Value="Microsoft YaHei UI, Segoe UI"/>
                <Setter Property="HorizontalAlignment" Value="Center"/>
                <Setter Property="Effect">
                    <Setter.Value>
                        <DropShadowEffect Color="White" Opacity="0.4" BlurRadius="2" ShadowDepth="0"/>
                    </Setter.Value>
                </Setter>
            </Style>
        </ResourceDictionary>
    </UserControl.Resources>
    <Grid x:Name="MainGrid">
        <bg:FastStarrySky x:Name="StarrySkyBackground" NumberOfStars="80" MaxLineDistance="100" StarSize="3.5" LineThickness="1"/>
        <Border Width="{StaticResource PanelWidth}"
                Height="{StaticResource PanelHeight}" 
                SnapsToDevicePixels="True" UseLayoutRounding="True"
                Background="{StaticResource GlassBackground}"
                BorderBrush="{StaticResource GlassBorder}"
                BorderThickness="1" 
                CornerRadius="28"
                VerticalAlignment="Center" 
                HorizontalAlignment="Center">
            <Border.Effect>
                <BlurEffect Radius="1" KernelType="Gaussian" RenderingBias="Quality"/>
            </Border.Effect>
            <Grid Margin="50" >
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                <StackPanel Grid.Row="0" Margin="0,0,0,40" Orientation="Horizontal" HorizontalAlignment="Center">
                    <Path Data="{StaticResource StarIcon}" Fill="{DynamicResource TextIconBrush}" Height="36" Width="36" Stretch="Fill"
                          VerticalAlignment="Center" Margin="0 20 5 0"/>
                    <TextBlock Text="{bg:StringResource 用户登录}"
                               Style="{StaticResource GlassTitle}" 
                               Margin="0,20,0,0" 
                               VerticalAlignment="Center"/>
                </StackPanel>
                <StackPanel Grid.Row="1" VerticalAlignment="Center" Margin="20 0">
                    <ComboBox Grid.Row="0" 
                              hc:InfoElement.TitleWidth="120"
                              hc:InfoElement.TitlePlacement="Top"
                              hc:InfoElement.ShowClearButton="True"
                              hc:InfoElement.Title="{bg:StringResource 用户名,StringFormat={}{0}：}"
                              hc:TitleElement.VerticalAlignment="Center"
                              hc:TitleElement.HorizontalAlignment="Left"
                              hc:InfoElement.ContentHeight="42"
                              Style="{DynamicResource ComboBoxExtend}" 
                              ItemsSource="{Binding Users}"
                              SelectedItem="{Binding UserName,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" />
                    <PasswordBox  hc:InfoElement.TitleWidth="120"
                                  hc:InfoElement.TitlePlacement="Top"
                                  hc:InfoElement.ShowClearButton="True"
                                  hc:InfoElement.Title="{bg:StringResource 密码,StringFormat={}{0}：}"
                                  hc:TitleElement.VerticalAlignment="Center"
                                  hc:TitleElement.HorizontalAlignment="Left"
                                  hc:InfoElement.ContentHeight="42"
                                  Style="{DynamicResource PasswordBoxExtend}"
                                  bg:TouchKeyboard.IsEnabled="True"
                                  bg:PasswordHelper.Attach="True"
                                  bg:PasswordHelper.Password="{Binding Password,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"
                                  Margin="0 15 0 0"/>
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0 15 0 0">
                        <!--<CheckBox Content="{bg:StringResource 自动登录}" IsChecked="{Binding IsAutoLogin}"
                              Visibility="{Binding IsAllowAutoLogin,Converter={StaticResource Boolean2VisibilityConverter}}"/>-->
                        <CheckBox Content="{bg:StringResource 记住密码}" IsChecked="{Binding IsRemember}" Margin="15 0 0 0" 
                                  Visibility="{Binding IsAllowRemember,Converter={StaticResource Boolean2VisibilityConverter}}"/>
                    </StackPanel>

                    <Button Grid.Row="1" Margin="0 30 0 0"
                            Style="{DynamicResource LoginButtonStyle}" 
                            hc:BorderElement.CornerRadius="8"
                            Content="{bg:StringResource 登陆}" IsDefault="True"
                            Width="240" Height="42"
                            Command="{Binding LoginCommand}" />
                </StackPanel>
                <Border Grid.RowSpan="2" Height="120" VerticalAlignment="Top" CornerRadius="28,28,0,0">
                    <Border.OpacityMask>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                            <GradientStop Color="Black" Offset="0"/>
                            <GradientStop Color="Transparent" Offset="1"/>
                        </LinearGradientBrush>
                    </Border.OpacityMask>
                    <Border.Background>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                            <GradientStop Color="#80FFFFFF" Offset="0"/>
                            <GradientStop Color="#20FFFFFF" Offset="0.6"/>
                            <GradientStop Color="Transparent" Offset="1"/>
                        </LinearGradientBrush>
                    </Border.Background>
                </Border>
                <Border Grid.RowSpan="2" BorderThickness="1" BorderBrush="{DynamicResource BorderBrush}" CornerRadius="28 28 0 0"/>
            </Grid>
        </Border>
        <Grid HorizontalAlignment="Left" VerticalAlignment="Top" Margin="10,10,0,0" >
            <Image Source="/BgCommon.Prism.Wpf;component/Assets/Images/Logo/logo-bg.png" Width="35" Height="132" 
                   HorizontalAlignment="Center" VerticalAlignment="Top"
                   Margin="0,140,0,0"/>
            <Ellipse Width="180" Height="180" Opacity="0.4" HorizontalAlignment="Left" VerticalAlignment="Top">
                <Ellipse.Fill>
                    <RadialGradientBrush>
                        <GradientStop Color="#D0FFFFFF" Offset="0"/>
                        <GradientStop Color="#80FFFFFF" Offset="0.4"/>
                        <GradientStop Color="Transparent" Offset="1"/>
                    </RadialGradientBrush>
                </Ellipse.Fill>
            </Ellipse>
        </Grid>

        <Ellipse Width="120" Height="120" 
                 HorizontalAlignment="Right" 
                 VerticalAlignment="Bottom"
                 Margin="0,0,120,150"
                 Opacity="0.25">
            <Ellipse.Fill>
                <RadialGradientBrush>
                    <GradientStop Color="#F0A0A0FF" Offset="0"/>
                    <GradientStop Color="#60A0A0FF" Offset="0.6"/>
                    <GradientStop Color="Transparent" Offset="1"/>
                </RadialGradientBrush>
            </Ellipse.Fill>
        </Ellipse>
    </Grid>
</UserControl>